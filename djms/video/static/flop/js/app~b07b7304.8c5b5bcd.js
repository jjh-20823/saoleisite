(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~b07b7304"],{"020e":function(e,t,i){"use strict";i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n}));var s=i("bee2"),r=i("d4ec"),h=(i("b0c0"),i("99af"),function e(t){Object(r["a"])(this,e),this.time=0,this.column=0,this.row=0,this.number=void 0,this.x=0,this.y=0,this.stats={path:0,flags:0,solvedOps:0,solvedBBBV:0,solvedIsls:0,leftClicks:0,rightClicks:0,doubleClicks:0,wastedLeftClicks:0,wastedRightClicks:0,wastedDoubleClicks:0},this.name=t}),a=function e(t){Object(r["a"])(this,e),this.opened=!1,this.flagged=!1,this.questioned=!1,this.island=0,this.opening=0,this.opening2=0,this.number=t?-1:0},n=function(){function e(){var t=this;Object(r["a"])(this,e),this.getTime=function(){return t.mTime},this.getWidth=function(){return t.mWidth},this.getHeight=function(){return t.mHeight},this.getMines=function(){return t.mMines},this.getMarks=function(){return t.mMarks},this.getLevel=function(){return t.mLevel},this.getBBBV=function(){return t.mBBBV},this.getLeftClicks=function(){return t.mLeftClicks},this.getRightClicks=function(){return t.mRightClicks},this.getDoubleClicks=function(){return t.mDoubleClicks},this.getIslands=function(){return t.mIslands},this.getOpenings=function(){return t.mOpenings},this.getVideoBoard=function(){return t.mVideoBoard},this.getGameBoard=function(){return t.mGameBoard},this.getGameEvents=function(){return t.mGameEvents},this.getPlayerArray=function(){return t.mPlayerArray}}return Object(s["a"])(e,[{key:"error",value:function(e){throw new Error("".concat(this.mName,"Error - ").concat(e))}}]),e}()},"04df":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i("d4ec"),r=i("bee2"),h=i("262e"),a=i("2caf"),n=(i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("498a"),i("fb6a"),i("a9e3"),i("8ba4"),i("3718")),o=i("da92"),u=function(e){Object(h["a"])(i,e);var t=Object(a["a"])(i);function i(e){var r;return Object(s["a"])(this,i),r=t.call(this,e),r.mName="RawVideo",r.mWidth=-1,r.mHeight=-1,r.mMines=-1,r.mMarks=!1,r.mLevel=0,r.mBoard=[],r.mEvents=[],r.mPlayer=new Uint8Array,r.readOptions(),r.readBoard(),r.readEvents(),r}return Object(r["a"])(i,[{key:"readOptions",value:function(){var e=new TextDecoder;while(1){var t=this.getLine();if(null==t)return void this.error("No board");var i=e.decode(t).toLowerCase().trim(),s=i.indexOf(":");if(!(s<=0)){var r=i.substring(0,s),h=i.substring(s+1).trim();if("player"===r)this.mPlayer=t.slice(s+1);else if("width"===r)this.mWidth=Number(h),(!Number.isInteger(this.mWidth)||this.mWidth<=0)&&this.error('Invalid board width: "'.concat(h,'"'));else if("height"===r)this.mHeight=Number(h),(!Number.isInteger(this.mHeight)||this.mHeight<=0)&&this.error('Invalid board height: "'.concat(h,'"'));else if("mines"===r)this.mMines=Number(h),(!Number.isInteger(this.mMines)||this.mMines<0)&&this.error('Invalid number of mines: "'.concat(h,'"'));else if("marks"===r||r==="QuestionMarks".toLowerCase())"on"!==h&&"off"!==h&&this.error('Invalid question marks: "'.concat(h,'"')),this.mMarks="on"===h;else if("level"===r)"beginner"===h?this.mLevel=1:"intermediate"===h?this.mLevel=2:"expert"===h?this.mLevel=3:"custom"===h?this.mLevel=4:"marathon"===h&&this.error("This program doesn't support marathon RawVF");else if("mode"===r)"cheat"===h&&this.error("This program doesn't support cheat RawVF");else if("board"===r)break}}this.mWidth<0&&this.error("No width"),this.mHeight<0&&this.error("No height"),this.mMines<0&&this.error("No mines")}},{key:"readBoard",value:function(){for(var e=0;e<this.mHeight;e++){var t=this.getLine();if(null===t)return void this.error("Unexpected end of board");for(var i=0;i<this.mWidth;i++)this.mBoard[e*this.mWidth+i]=42===t[i]?1:0}}},{key:"readEvents",value:function(){var e=new TextDecoder,t="",i=function(e){var i=t.indexOf(e);if(-1===i)return t="";var s=t.slice(0,i);return t=t.slice(i+1).trim(),s};while(1){var s=this.getLine();if(null===s)break;var r=e.decode(s).trim();if(this.isDigit(r[0])||"-"===r[0]){t=r;var h={};h.time=Object(o["e"])(Number(i(" ")),1e3);var a=i(" ");"lc"!==a&&"lr"!==a&&"rc"!==a&&"rr"!==a&&"mc"!==a&&"mr"!==a&&"mv"!==a&&"sc"!==a&&"mt"!==a||(h.mouse=a),t=-1!==t.indexOf("(")?t.slice(t.indexOf("(")+1).trim():"",0!==t.length&&(h.x=Number(i(" ")),h.y=Number(i(")")),Number.isInteger(h.time)&&void 0!==h.mouse&&Number.isInteger(h.x)&&Number.isInteger(h.y)||this.error('Invalid mouse event: "'.concat(r,'"')),h.column=Math.floor(h.x/16),h.row=Math.floor(h.y/16),this.mEvents.push(h))}}}}]),i}(n["a"])},1943:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("d4ec"),r=i("bee2"),h=i("262e"),a=i("2caf"),n=(i("b0c0"),i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("159b"),i("cb29"),i("a15b"),i("fb6a"),i("3718")),o=function(e){Object(h["a"])(i,e);var t=Object(a["a"])(i);function i(e){var r;Object(s["a"])(this,i),r=t.call(this,e),r.mName="AVFVideo",r.MAX_NAME=1e3,r.mode=0,r.w=0,r.h=0,r.m=0,r.size=0,r.board=[],r.qm=!1,r.ver=0,r.name=[],r.skin=[],r.program=[],r.value=[],r.timestampA=[],r.customdata=[],r.video=[],r.scoreSec=0,r.scoreHun=0,r.spacer="",r.versionend=[],r.versionprint=[],r.bbbv=0,r.realtime=0,r.bbbvs=0,r.readavf()||r.error("Invalid AVF"),r.mWidth=r.w,r.mHeight=r.h,r.mMines=r.m,r.mMarks=r.qm,r.mBoard=r.board,r.mLevel=r.mode,r.mPlayer=new Uint8Array(r.name.length),r.name.forEach((function(e,t){r.mPlayer[t]=e.charCodeAt(0)})),r.mEvents=[];for(var h=-1,a=-1,n=0;n<r.size;++n){var o=r.video[n];if(1!==o.mouse||o.x!==h||o.y!==a){h=o.x,a=o.y;var u={};u.time=1e3*o.sec+10*o.hun,1===o.mouse?u.mouse="mv":3===o.mouse?u.mouse="lc":5===o.mouse?u.mouse="lr":9===o.mouse?u.mouse="rc":17===o.mouse?u.mouse="rr":33===o.mouse?u.mouse="mc":65===o.mouse?u.mouse="mr":145===o.mouse?u.mouse="rr":193===o.mouse?u.mouse="mr":11===o.mouse?u.mouse="sc":21===o.mouse&&(u.mouse="lr"),u.column=Math.floor(o.x/16),u.row=Math.floor(o.y/16),u.x=o.x,u.y=o.y,r.mEvents.push(u)}}return r}return Object(r["a"])(i,[{key:"getpair",value:function(e,t){var i=0,s="";while(":"!==s&&13!==s.charCodeAt(0)&&i<this.MAX_NAME){if(s=this.getChar(),"<"===s){e.length=i,t=[];while(13!==this.getNum());return}e[i++]=s}e.length=--i,i=0;while(13!==s.charCodeAt(0)&&i<this.MAX_NAME)s=this.getChar(),t[i++]=s;t.length=i}},{key:"readavf",value:function(){var e,t,s=0,r=0,h=new Array(8);for(t=this.getNum(),this.ver=t,e=0;e<4;++e)t=this.getNum();if(t=this.getNum(),this.mode=t-2,1===this.mode)this.w=this.h=8,this.m=10;else if(2===this.mode)this.w=this.h=16,this.m=40;else if(3===this.mode)this.w=30,this.h=16,this.m=99;else{if(4!==this.mode)return 0;this.w=(t=this.getNum())+1,this.h=(t=this.getNum())+1,this.m=t=this.getNum(),this.m=256*this.m+(t=this.getNum())}for(this.board=new Array(this.w*this.h).fill(0),e=0;e<this.m;++e)t=this.getNum()-1,r=this.getNum()-1,this.board[t*this.w+r]=1;for(e=0;e<7;++e)h[e]=0;while(h[3]!=="[".charCodeAt(0)||h[5]!=="|".charCodeAt(0))h[0]=h[1],h[1]=h[2],h[2]=h[3],h[3]=h[4],h[4]=h[5],h[5]=this.getNum();if(17!==h[1]&&127!==h[1])return 0;if(this.qm=17===h[1],4===this.mode){e=0;while(e<this.MAX_NAME)if("|"===(this.customdata[e++]=this.getChar())){this.customdata.pop();break}e=0;while(e<this.MAX_NAME)if("|"===(this.timestampA[e++]=this.getChar())){this.timestampA.pop();break}}else{e=0;while(e<this.MAX_NAME)if("|"===(this.timestampA[e++]=this.getChar())){this.timestampA.pop();break}}while("B"!==this.getChar());for(e=0;e<7;++e)h[e]=0;e=0;while(t=this.getNum()){if(t==="T".charCodeAt(0))break;h[e]=t,e++}for(this.bbbv=i.atoi((new TextDecoder).decode(new Uint8Array(h))),e=0;e<7;++e)h[e]=0;e=0;while(t=this.getNum()){if(t===".".charCodeAt(0)||t===",".charCodeAt(0))break;h[e]=t,e++}for(this.scoreSec=i.atoi((new TextDecoder).decode(new Uint8Array(h)))-1,e=0;e<7;++e)h[e]=0;e=0;while(t=this.getNum()){if(t==="]".charCodeAt(0))break;h[e]=t,e++}for(this.scoreHun=i.atoi((new TextDecoder).decode(new Uint8Array(h))),e=0;e<7;++e)h[e]=0;while(1!==h[2]||h[1]>1)h[0]=h[1],h[1]=h[2],h[2]=this.getNum();for(e=3;e<8;++e)h[e]=this.getNum();while(1){if(this.video[s]={},this.video[s].mouse=h[0],this.video[s].x=256*h[1]+h[3],this.video[s].y=256*h[5]+h[7],this.video[s].sec=256*h[6]+h[2]-1,this.video[s].hun=h[4],this.video[s].sec<0)break;for(e=0;e<8;++e)h[e]=this.getNum();++s}for(this.size=s,e=0;e<3;++e)h[e]=0;while(h[0]!=="c".charCodeAt(0)||h[1]!=="s".charCodeAt(0)||h[2]!=="=".charCodeAt(0))h[0]=h[1],h[1]=h[2],h[2]=this.getNum();for(e=0;e<17;++e)this.getChar();while(1){if(this.getpair(this.name,this.value),!this.value[0])break;"Skin"===this.name.join("")&&(this.skin=this.value.slice(1))}e=0;while(e<this.MAX_NAME)if("0"===(this.program[e++]=this.getChar())){this.program.length=--e;break}for(e=0,e=0;e<3;++e)this.getChar();for(this.spacer=this.getChar(),e=0;e<10;++e)this.versionend[e]=this.getChar();for(e=0;e<this.MAX_NAME;++e)"."!==this.versionend[e]&&"C"!==this.versionend[e]&&(this.versionprint[e]=this.versionend[e]);return 1}}],[{key:"atoi",value:function(e){return parseInt(e)||0}}]),i}(n["a"])},"1e42":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("d4ec"),r=i("bee2"),h=i("262e"),a=i("2caf"),n=(i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("020e")),o=function(e){Object(h["a"])(i,e);var t=Object(a["a"])(i);function i(){var e;return Object(s["a"])(this,i),e=t.apply(this,arguments),e.mName="DefaultParser",e.mTime=0,e.mWidth=8,e.mHeight=8,e.mMines=0,e.mMarks=!1,e.mLevel=1,e.mBBBV=0,e.mDoubleClicks=0,e.mLeftClicks=0,e.mRightClicks=0,e.mIslands=0,e.mOpenings=0,e.mVideoBoard=[],e.mGameBoard=[],e.mGameEvents=[new n["c"]("UnexpectedEnd")],e.mPlayerArray=new Uint8Array,e}return Object(r["a"])(i,[{key:"appendEvent",value:function(){return this.mGameEvents}}]),i}(n["a"])},2423:function(e){e.exports=JSON.parse('{"menu":{"game":{"title":"游戏","localVideo":"选择本地文件","fileDrag":"检测文件拖放","marks":"标记问号 (?)","share":{"copy":"复制分享链接","open":"打开分享链接","copied":"分享链接已复制到剪贴板","error":"分享链接复制失败"},"download":"下载录像文件"},"options":{"title":"选项","language":"简体中文","toggleLanguages":"切换语言","squareSize":"方块边长","videoMap":{"title":"鼠标路径","move":"鼠标移动","left":"鼠标左键","right":"鼠标右键","double":"鼠标双击","opening":"开空"}},"help":{"title":"帮助","source":"开源代码","bugs":"问题反馈","version":"版本信息","author":{"title":"作者","blog":"我的博客","domain":"我的地盘"}},"exit":{"title":"退出"}},"game":{"upk":"重开","anonymous":"佚名"},"controlBar":{"play":"播放","pause":"暂停","replay":"重放","displayVideoMap":"显示鼠标路径","hideVideoMap":"隐藏鼠标路径","reset":"重置"},"common":{"loading":"加载中...","copied":"复制成功: {0}","fileSelect":"请选择一个 avf/mvf/rmv/rawvf 文件"},"error":{"copy":"复制失败: {0}","videoParse":"录像解析出错：","uriRequest":"数据请求出错：{0}","invalidStatus":"无效的状态码：{0}","shareParams":"分享参数解析失败: {0}","fileNotPresent":"文件不存在","fileNotSelect":"未选择文件或者文件无法访问","fileTooMany":"文件数量过多：{0}","fileEmpty":"文件内容为空：{0}","fileUnsupported":"@:common.fileSelect","fileTooLarge":"文件大小超过 5 MB：{0}","fileReadError":"文件读取出错：{0}"}}')},"363b":function(e){e.exports=JSON.parse('{"menu":{"game":{"title":"Spiel","localVideo":"Datei auswählen","fileDrag":"Ziehen und Ablegen","marks":"Fragezeichen (?)","share":{"copy":"Link kopieren","open":"Link öffnen","copied":"Link wurde in die Zwischenablage kopiert","error":"Link kopieren fehlgeschlagen"},"download":"Video herunterladen"},"options":{"title":"Optionen","language":"Deutsch","toggleLanguages":"Sprachen","squareSize":"Feldgröße","videoMap":{"title":"Mauspfad","move":"Mausbewegung","left":"Linksklick","right":"Rechtsklick","double":"Doppelklick","opening":"Öffnung"}},"help":{"title":"Hilfe","source":"Quellcode","bugs":"Fehler melden","version":"Versionsname","author":{"title":"Autor","blog":"Mein Blog","domain":"Meine Domain"}},"exit":{"title":"Beenden"}},"game":{"upk":"Vorabinformation","anonymous":"Anonym"},"controlBar":{"play":"Abspielen","pause":"Pausieren","replay":"Erneut abspielen","displayVideoMap":"Mauspfad anzeigen","hideVideoMap":"Mauspfad ausblenden","reset":"Neustart"},"common":{"loading":"Lädt...","copied":"Kopieren erfolgreich: {0}","fileSelect":"Bitte wählen Sie eine avf/mvf/rmv/rawvf-Datei aus"},"error":{"copy":"Kopieren fehlgeschlagen: {0}","videoParse":"Lesefehler: ","uriRequest":"Datenanfragefehler：{0}","invalidStatus":"Invalider Statuscode：{0}","shareParams":"Teil-Parameter-Lesefehler: {0}","fileNotPresent":"Datei existiert nicht","fileNotSelect":"Keine Datei ausgewählt oder Datei nicht verfügbar","fileTooMany":"Zu viele Dateien: {0}","fileEmpty":"Dateiinhalt ist leer: {0}","fileUnsupported":"@:common.fileSelect","fileTooLarge":"Datei ist größer als 5 MB: {0}","fileReadError":"Dateilesefehler: {0}"}}')},3718:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("d4ec"),r=i("bee2"),h=(i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("99af"),i("fb6a"),function(){function e(t){Object(s["a"])(this,e),this.mOffset=0,this.mData=new Uint8Array,this.mData=new Uint8Array(t)}return Object(r["a"])(e,[{key:"error",value:function(e){throw new Error("".concat(this.mName,"Error - ").concat(e))}},{key:"getNum",value:function(){var e=this.mData[this.mOffset++];return void 0===e&&this.error("Unexpected end of data"),e}},{key:"getInt2",value:function(){return 256*this.getNum()+this.getNum()}},{key:"getInt3",value:function(){return 65536*this.getNum()+256*this.getNum()+this.getNum()}},{key:"getInt",value:function(){return 65536*this.getNum()+16777216*this.getNum()+this.getNum()+256*this.getNum()}},{key:"getChar",value:function(){return String.fromCharCode(this.getNum())}},{key:"getLine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;if(this.mOffset>=this.mData.length)return null;var t,i=new Uint8Array(e),s=0;while(10!==(t=this.getNum())&&s<e&&this.mOffset<this.mData.length)i[s++]=t;return i.slice(0,s)}},{key:"seek",value:function(e,t){switch(t){case"SEEK_SET":this.mOffset=e;break;case"SEEK_CUR":this.mOffset+=e;break;case"SEEK_END":this.mOffset=this.mData.length-e;break}}},{key:"getOffset",value:function(){return this.mOffset}},{key:"isDigit",value:function(e){return e>="0"&&e<="9"}},{key:"getWidth",value:function(){return this.mWidth}},{key:"getHeight",value:function(){return this.mHeight}},{key:"getMines",value:function(){return this.mMines}},{key:"getMarks",value:function(){return this.mMarks}},{key:"getLevel",value:function(){return this.mLevel}},{key:"getBoard",value:function(){return this.mBoard}},{key:"getEvents",value:function(){return this.mEvents}},{key:"getPlayerArray",value:function(){return this.mPlayer}}]),e}())},"3cab":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("d4ec"),r=i("bee2"),h=i("262e"),a=i("2caf"),n=(i("b0c0"),i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("cb29"),i("3718")),o=function(e){Object(h["a"])(i,e);var t=Object(a["a"])(i);function i(e){var r;Object(s["a"])(this,i),r=t.call(this,e),r.mName="RMVVideo",r.mEvents=[],r.mode=0,r.level=0,r.w=0,r.h=0,r.m=0,r.size=0,r.board=[],r.qm=0,r.nf=0,r.name=[],r.nick=[],r.country=[],r.token=[],r.program="",r.version="",r.verstring="",r.verlength="",r.timestamp="",r.video=[],r.squareSize=16,r.score=0,r.scoreCheck=0,r.bbbv=[],r.bbbvint=0,r.bbbvs=0,r.bbbvsFinal=0,r.readrmv()||r.error("Invalid RMV"),r.mWidth=r.w,r.mHeight=r.h,r.mMines=r.m,r.mMarks=0!==r.qm,r.mLevel=r.level+1,r.mBoard=r.board,r.mPlayer=new Uint8Array(r.name);for(var h=["mv","lc","lr","rc","rr","mc","mr"],a=0;a<r.size;++a){var n=r.video[a];n.event>=1&&n.event<=7&&r.mEvents.push({time:n.time,mouse:h[n.event-1],column:Math.floor(n.x/r.squareSize),row:Math.floor(n.y/r.squareSize),x:n.x,y:n.y})}return r}return Object(r["a"])(i,[{key:"readrmv",value:function(){var e,t,i,s,r,h,a,n,o=0,u="*rmv",d=1;for(e=0;e<4;++e)(t=this.getChar())!==u[e]&&this.error("No RMV header");1!==this.getInt2()&&this.error("Invalid video type"),this.getInt();var l=this.getInt2(),m=this.getInt2();this.getInt2(),this.getInt2();var c=this.getInt2(),v=this.getInt2();if(this.getInt(),this.getInt2(),this.getNum(),l>35){for(e=0;e<l-32;++e)this.getNum();for(e=0;e<3;++e)this.bbbv[e]=this.getChar();for(this.isDigit(this.bbbv[0])||(this.bbbv[0]=" "),this.isDigit(this.bbbv[1])||(this.bbbv[1]=" "),this.isDigit(this.bbbv[2])||(this.bbbv[2]=" "),e=0;e<16;++e)this.getNum();for(e=0;e<10;++e)this.timestamp+=this.getChar()}else for(this.bbbv=[],this.timestamp="",e=0;e<l-3;++e)this.getNum();for(this.getInt2(),e=0;e<18;++e)this.program+=this.getChar();for(this.getInt3(),e=0;e<m-22;++e)this.version+=this.getChar();this.getNum();var f=this.getInt2();if(f>0)for(s=this.getNum(),e=0;e<s;++e)this.name[e]=this.getNum();if(f>1)for(r=this.getNum(),e=0;e<r;++e)this.nick[e]=this.getNum();if(f>2)for(h=this.getNum(),e=0;e<h;++e)this.country[e]=this.getNum();if(f>3)for(a=this.getNum(),e=0;e<a;++e)this.token[e]=this.getNum();for(this.getInt(),this.w=this.getNum(),this.h=this.getNum(),this.m=this.getInt2(),this.board=new Array(this.w*this.h).fill(0),e=0;e<this.m;++e)t=this.getNum(),i=this.getNum(),(t>this.w||i>this.h)&&this.error("Invalid mine position"),this.board[i*this.w+t]=1;if(c)for(n=this.getInt2(),e=0;e<n;++e)t=this.getNum(),i=this.getNum(),this.video[o++]={event:4,time:0,x:this.squareSize/2+t*this.squareSize,y:this.squareSize/2+i*this.squareSize},this.video[o++]={event:5,time:0,x:this.squareSize/2+t*this.squareSize,y:this.squareSize/2+i*this.squareSize};for(this.qm=this.getNum(),this.nf=this.getNum(),this.mode=this.getNum(),this.level=this.getNum(),e=4;e<v;++e)this.getNum();while(1)if(this.video[o]={},this.video[o].event=t=this.getNum(),++e,t)if(t<=7)e+=8,this.video[o].time=this.getInt3(),this.getNum(),this.video[o].x=this.getInt2()-12,this.video[o].y=this.getInt2()-56,o++,d&&(d=0,this.video[o]={},this.video[o].event=this.video[o-1].event,this.video[o-1].event=2,this.video[o].time=this.video[o-1].time,this.video[o].x=this.video[o-1].x,this.video[o].y=this.video[o-1].y,o++);else if(8===t)this.error("Invalid event");else if(t<=14||t>=18&&t<=27)e+=2,this.video[o].x=this.getNum()+1,this.video[o].y=this.getNum()+1,o++;else{if(t<=17)break;this.error("Invalid event")}else this.getInt(),e+=4;return this.size=o+1,1}}]),i}(n["a"])},"3e6a":function(e,t,i){var s={"./de.yml":"363b","./en.yml":"eb57","./zh-Hans.yml":"2423","./zh-Hant.yml":"dfe4"};function r(e){var t=h(e);return i(t)}function h(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=h,e.exports=r,r.id="3e6a"},"5fd3":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i("d4ec"),r=i("bee2"),h=i("262e"),a=i("2caf"),n=(i("5377"),i("a630"),i("3ca3"),i("99af"),i("b680"),i("a9e3"),i("020e")),o=i("da92"),u=function(e){Object(h["a"])(i,e);var t=Object(a["a"])(i);function i(e,r){var h;Object(s["a"])(this,i),h=t.call(this),h.mName="VideoParser",h.mTime=0,h.mLeftClicks=0,h.mRightClicks=0,h.mDoubleClicks=0,h.mIslands=0,h.mOpenings=0,h.mGameBoard=[],h.mGameEvents=[],h.preEvent={},h.curEvent={},h.gameState="Begin",h.path=0,h.flags=0,h.solvedOps=0,h.unsolvedOps=[0],h.solvedIsls=0,h.unsolvedIsls=[0],h.solvedBBBV=0,h.wastedLeftClicks=0,h.wastedRightClicks=0,h.wastedDoubleClicks=0,h.leftPressed=!1,h.rightPressed=!1,h.middlePressed=!1,h.leftValid=!1,h.rightValid=!1,h.shiftValid=!1,h.mWidth=e.getWidth(),h.mHeight=e.getHeight(),h.mMines=e.getMines(),h.mVideoBoard=e.getBoard(),h.mPlayerArray=e.getPlayerArray(),h.appendable=r,h.mMarks=h.marks=e.getMarks(),h.mLevel=e.getLevel(),h.initBoard(e.getBoard()),h.mBBBV=h.mOpenings+h.unsolvedIsls.reduce((function(e,t){return e+t}));for(var a=0;a<e.getEvents().length;a++)if(h.performEvent(e.getEvents()[a]),"Win"===h.gameState||"Lose"===h.gameState)break;return r||("Begin"===h.gameState?h.error("Unexpected end of video events"):"Start"===h.gameState&&h.pushGameEvent("UnexpectedEnd")),h}return Object(r["a"])(i,[{key:"appendEvent",value:function(e){return this.appendable&&this.performEvent(e),this.mGameEvents}},{key:"pushGameEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.curEvent.column,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.curEvent.row;this.mGameEvents.push({name:e,time:this.mTime=this.curEvent.time,number:this.isInside(t,i)?this.mGameBoard[t+i*this.mWidth].number:void 0,x:this.curEvent.x,y:this.curEvent.y,column:t,row:i,stats:{path:this.path,flags:this.flags,solvedOps:this.solvedOps,solvedIsls:this.solvedIsls,solvedBBBV:this.solvedBBBV,leftClicks:this.mLeftClicks,rightClicks:this.mRightClicks,doubleClicks:this.mDoubleClicks,wastedLeftClicks:this.wastedLeftClicks,wastedRightClicks:this.wastedRightClicks,wastedDoubleClicks:this.wastedDoubleClicks}})}},{key:"initBoard",value:function(e){this.mGameBoard=Array.from(Array(this.mWidth*this.mHeight),(function(t,i){return new n["b"](1===e[i])}));for(var t=0;t<this.mWidth;t++)for(var i=0;i<this.mHeight;i++)this.mGameBoard[t+i*this.mWidth].number=this.getAroundMines(t,i);for(var s=0;s<this.mWidth;s++)for(var r=0;r<this.mHeight;r++){var h=this.mGameBoard[s+r*this.mWidth];0===h.number&&0===h.opening&&this.setOpeningsAround(s,r,++this.mOpenings)}for(var a=0;a<this.mWidth;a++)for(var o=0;o<this.mHeight;o++){var u=this.mGameBoard[a+o*this.mWidth];u.number>0&&0===u.opening&&0===u.island&&this.setIslandAround(a,o,++this.mIslands)}}},{key:"setOpenings",value:function(e,t,i){var s=this.mGameBoard[e+t*this.mWidth];this.isInside(e,t)&&-1!==s.number&&s.opening!==i&&s.opening2!==i&&(0===s.number?(s.opening=i,this.setOpeningsAround(e,t,i)):s.opening?s.opening2=i:s.opening=i,this.unsolvedOps[i]=this.unsolvedOps[i]?this.unsolvedOps[i]+1:1)}},{key:"setOpeningsAround",value:function(e,t,i){if(this.isInside(e,t))for(var s=e-1;s<=e+1;s++)for(var r=t-1;r<=t+1;r++)this.setOpenings(s,r,i)}},{key:"setIsland",value:function(e,t,i){if(this.isInside(e,t)){var s=this.mGameBoard[e+t*this.mWidth];s.number>0&&0===s.opening&&0===s.island&&(s.island=i,this.setIslandAround(e,t,i),this.unsolvedIsls[i]=this.unsolvedIsls[i]?this.unsolvedIsls[i]+1:1)}}},{key:"setIslandAround",value:function(e,t,i){if(this.isInside(e,t))for(var s=e-1;s<=e+1;s++)for(var r=t-1;r<=t+1;r++)this.setIsland(s,r,i)}},{key:"getAroundMines",value:function(e,t){var i=this.mGameBoard[e+t*this.mWidth];if(!this.isInside(e,t)||-1===i.number)return i.number;for(var s=0,r=e-1;r<=e+1;r++)for(var h=t-1;h<=t+1;h++)s+=this.isInside(r,h)&&-1===this.mGameBoard[r+h*this.mWidth].number?1:0;return s}},{key:"getAroundFlags",value:function(e,t){var i=0;if(!this.isInside(e,t))return i;for(var s=e-1;s<=e+1;s++)for(var r=t-1;r<=t+1;r++)i+=this.isInside(s,r)&&this.mGameBoard[s+r*this.mWidth].flagged?1:0;return i}},{key:"performEvent",value:function(e){if("Win"!==this.gameState&&"Lose"!==this.gameState){switch(this.curEvent=e,this.curEvent.time<this.preEvent.time&&this.error("Unexpected time flow: ".concat(Object(o["d"])(this.preEvent.time/1e3,3).toFixed(3)," to ").concat(Object(o["d"])(this.curEvent.time/1e3,3).toFixed(3))),this.mouseMove(),this.curEvent.mouse){case"lc":this.leftPress();break;case"lr":this.leftRelease();break;case"rc":this.rightPress();break;case"rr":this.rightRelease();break;case"mc":this.middlePress();break;case"mr":this.middleRelease();break;case"sc":this.leftPressWithShift();break;case"mt":this.toggleQuestionMarkSetting();break}this.preEvent=this.curEvent,this.checkGameOver()}}},{key:"checkGameOver",value:function(){"Win"!==this.gameState&&"Lose"!==this.gameState||(this.handleUnopened(),this.pushGameEvent(this.gameState))}},{key:"mouseMove",value:function(){this.curEvent.x===this.preEvent.x&&this.curEvent.y===this.preEvent.y||(this.pushGameEvent("MouseMove"),this.path+=Math.pow(Math.pow(this.curEvent.x-this.preEvent.x||0,2)+Math.pow(this.curEvent.y-this.preEvent.y||0,2),.5),this.curEvent.column===this.preEvent.column&&this.curEvent.row===this.preEvent.row||(this.leftPressed&&(this.rightPressed||this.shiftValid)||this.middlePressed?(this.releaseAround(this.preEvent.column,this.preEvent.row),this.pressAround(this.curEvent.column,this.curEvent.row)):this.leftPressed&&this.leftValid&&(this.release(this.preEvent.column,this.preEvent.row),this.press(this.curEvent.column,this.curEvent.row))))}},{key:"leftPress",value:function(){this.pushGameEvent("LeftPress"),this.leftPressed=this.leftValid=!0,this.rightPressed?this.pressAround(this.curEvent.column,this.curEvent.row):this.press(this.curEvent.column,this.curEvent.row)}},{key:"leftPressWithShift",value:function(){this.pushGameEvent("LeftPressWithShift"),this.pressAround(this.curEvent.column,this.curEvent.row),this.leftPressed=this.leftValid=this.shiftValid=!0}},{key:"leftRelease",value:function(){this.pushGameEvent("LeftRelease"),this.rightPressed||this.shiftValid?(this.mDoubleClicks++,this.releaseAround(this.curEvent.column,this.curEvent.row),this.openAround(this.curEvent.column,this.curEvent.row)||this.wastedDoubleClicks++,this.pushGameEvent("DoubleIncrease")):this.leftValid&&(this.mLeftClicks++,this.release(this.curEvent.column,this.curEvent.row),this.open(this.curEvent.column,this.curEvent.row)||this.wastedLeftClicks++,this.pushGameEvent("LeftIncrease")),this.leftPressed=this.leftValid=this.rightValid=this.shiftValid=!1}},{key:"rightPress",value:function(){this.pushGameEvent("RightPress"),this.leftPressed?this.pressAround(this.curEvent.column,this.curEvent.row):this.toggleLabel(this.curEvent.column,this.curEvent.row)?(this.mRightClicks++,this.pushGameEvent("RightIncrease"),this.rightValid=!1):this.rightValid=!0,this.rightPressed=!0}},{key:"rightRelease",value:function(){this.pushGameEvent("RightRelease"),this.leftPressed?(this.mDoubleClicks++,this.releaseAround(this.curEvent.column,this.curEvent.row),this.openAround(this.curEvent.column,this.curEvent.row)||this.wastedDoubleClicks++,this.pushGameEvent("DoubleIncrease")):this.rightValid&&(this.mRightClicks++,this.wastedRightClicks++,this.pushGameEvent("RightIncrease")),this.rightPressed=this.leftValid=this.rightValid=this.shiftValid=!1}},{key:"middlePress",value:function(){this.pushGameEvent("MiddlePress"),this.pressAround(this.curEvent.column,this.curEvent.row),this.middlePressed=!0}},{key:"middleRelease",value:function(){this.pushGameEvent("MiddleRelease"),this.mDoubleClicks++,this.releaseAround(this.curEvent.column,this.curEvent.row),this.openAround(this.curEvent.column,this.curEvent.row)||this.wastedDoubleClicks++,this.pushGameEvent("DoubleIncrease"),this.middlePressed=!1}},{key:"toggleQuestionMarkSetting",value:function(){this.pushGameEvent("ToggleQuestionMarkSetting"),this.marks=!this.marks}},{key:"isInside",value:function(e,t){return e>=0&&e<this.mWidth&&t>=0&&t<this.mHeight}},{key:"toggleLabel",value:function(e,t){var i=this.mGameBoard[e+t*this.mWidth];return!(!this.isInside(e,t)||i.opened)&&(this.marks&&i.flagged?(i.flagged=!1,i.questioned=!0,this.pushGameEvent("QuestionMark",e,t)):i.flagged?(this.flags--,i.flagged=i.questioned=!1,this.pushGameEvent("RemoveFlag",e,t)):i.questioned?(i.flagged=i.questioned=!1,this.pushGameEvent("RemoveQuestionMark",e,t)):(this.flags++,i.flagged=!0,i.questioned=!1,this.pushGameEvent("Flag",e,t)),!0)}},{key:"press",value:function(e,t){var i=this.mGameBoard[e+t*this.mWidth];!this.isInside(e,t)||i.opened||i.flagged||this.pushGameEvent(i.questioned?"PressQuestionMark":"Press",e,t)}},{key:"pressAround",value:function(e,t){if(this.isInside(e,t))for(var i=e-1;i<=e+1;i++)for(var s=t-1;s<=t+1;s++)this.press(i,s)}},{key:"release",value:function(e,t){var i=this.mGameBoard[e+t*this.mWidth];!this.isInside(e,t)||i.opened||i.flagged||this.pushGameEvent(i.questioned?"ReleaseQuestionMark":"Release",e,t)}},{key:"releaseAround",value:function(e,t){if(this.isInside(e,t))for(var i=e-1;i<=e+1;i++)for(var s=t-1;s<=t+1;s++)this.release(i,s)}},{key:"open",value:function(e,t){var i=this.mGameBoard[e+t*this.mWidth];if(!this.isInside(e,t)||i.opened||i.flagged)return!1;if(i.opened=!0,"Begin"===this.gameState&&(this.gameState="Start",this.pushGameEvent("Start",e,t)),-1===i.number)return this.gameState="Lose",this.pushGameEvent("Blast",e,t),!0;var s=Number(0===--this.unsolvedOps[i.opening])+Number(0===--this.unsolvedOps[i.opening2]);return this.solvedIsls+=Number(0===--this.unsolvedIsls[i.island]),this.solvedOps+=s,this.solvedBBBV+=Number(i.island>0)+s,this.pushGameEvent("Open",e,t),0===i.number&&this.openAround(e,t),this.solvedBBBV===this.mBBBV&&(this.gameState="Win"),!0}},{key:"openAround",value:function(e,t){var i=this.mGameBoard[e+t*this.mWidth],s=!1;if(this.isInside(e,t)&&i.opened&&(0===i.number||i.number===this.getAroundFlags(e,t)))for(var r=e-1;r<=e+1;r++)for(var h=t-1;h<=t+1;h++)s=this.open(r,h)||s;return s}},{key:"handleUnopened",value:function(){if("Win"===this.gameState||"Lose"===this.gameState)for(var e=0;e<this.mWidth;e++)for(var t=0;t<this.mHeight;t++){var i=this.mGameBoard[e+t*this.mWidth];i.opened||(-1!==i.number||i.flagged?i.number>=0&&i.flagged&&this.pushGameEvent("Mislabeled",e,t):this.pushGameEvent("Win"===this.gameState?"Flag":"Mine",e,t))}}}]),i}(n["a"])},8475:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("d4ec"),r=i("262e"),h=i("2caf"),a=(i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("3718")),n=function(e){Object(r["a"])(i,e);var t=Object(h["a"])(i);function i(e,r,h,a,n,o){var u;return Object(s["a"])(this,i),u=t.call(this,new Uint8Array),u.mName="CustomVideo",u.mPlayer=new Uint8Array,u.mEvents=[],u.mWidth=e,u.mHeight=r,u.mMines=h,u.mMarks=a,u.mLevel=n,u.mBoard=o,u}return i}(a["a"])},"87ce":function(e,t,i){"use strict";i.d(t,"l",(function(){return s})),i.d(t,"j",(function(){return r})),i.d(t,"m",(function(){return h})),i.d(t,"g",(function(){return a})),i.d(t,"f",(function(){return n})),i.d(t,"e",(function(){return o})),i.d(t,"d",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return m})),i.d(t,"k",(function(){return c})),i.d(t,"h",(function(){return v})),i.d(t,"i",(function(){return f}));var s=[8,12,16,20,24,28,32,36,40,44,48],r=[.01,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2,3,4,5,6,7,8,9,10,15,20],h=10,a={height:11,widthLeft:12,widthRight:12},n={height:33,widthLeft:a.widthLeft,widthRight:a.widthRight},o={height:a.height,widthLeft:a.widthLeft},u={widthLeft:a.widthLeft},d={height:9,widthLeft:a.widthLeft},l={height:16,widthLeft:a.widthLeft},m={height:9,widthLeft:a.widthLeft},c=16,v=8*c,f={width:26,height:26}},bad0:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("d4ec"),r=i("bee2"),h=i("262e"),a=i("2caf"),n=(i("b0c0"),i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("fb6a"),i("3718")),o=function(e){Object(h["a"])(i,e);var t=Object(a["a"])(i);function i(e){var r;Object(s["a"])(this,i),r=t.call(this,e),r.mName="MVFVideo",r.mEvents=[],r.MAX_REP=1e5,r.MAX_NAME=1e3,r.mode=0,r.level=0,r.w=0,r.h=0,r.m=0,r.size=0,r.board=[],r.qm=0,r.hasDate=0,r.timestamp=[],r.month=0,r.year=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.hasInfo=0,r.bbbv=0,r.lcl=0,r.rcl=0,r.dcl=0,r.solvedBBBV=0,r.scoreSec=0,r.scoreThs=0,r.name=[],r.program="Minesweeper Clone",r.version="",r.video=[],r.squareSize=16,r.bbbvs=0,r.readmvf()||r.error("Invalid MVF"),r.mWidth=r.w,r.mHeight=r.h,r.mMines=r.m,r.mMarks=0!==r.qm,r.mLevel=r.level,r.mBoard=r.board,r.mPlayer=new Uint8Array(r.name),r.dumpFirstEvent(r.video[0]);for(var h=1;h<r.size;h++)r.dumpEvent(r.video[h],r.video[h-1]);return r}return Object(r["a"])(i,[{key:"readBoard",value:function(e){var t,i,s;this.w=this.getNum(),this.h=this.getNum();var r=this.w*this.h;for(i=0;i<r;++i)this.board[i]=0;for(t=this.getNum(),this.m=t<<8,t=this.getNum(),this.m+=t,i=0;i<this.m;++i)t=this.getNum(),s=t+e,t=this.getNum(),s+=(t+e)*this.w,(s>=r||s<0)&&this.error("Invalid mine position"),this.board[s]=1}},{key:"readEvent",value:function(e,t){for(var i=0;i<e;++i)t[i]=this.getNum()}},{key:"readScore",value:function(){var e=this.getNum(),t=this.getNum();this.scoreSec=256*e+t,this.scoreThs=10*this.getNum()}},{key:"applyPerm",value:function(e,t,i,s){return s[t[e]]&i[e]?1:0}},{key:"read097",value:function(){var e="",t=[],i=[],s=1e8,r=[];this.hasDate=1,this.hasInfo=1,this.month=this.getNum(),this.day=this.getNum(),this.year=this.getInt2(),this.hour=this.getNum(),this.minute=this.getNum(),this.second=this.getNum(),this.level=this.getNum(),this.mode=this.getNum(),this.readScore(),this.bbbv=this.getInt2(),this.solvedBBBV=this.getInt2(),this.lcl=this.getInt2(),this.dcl=this.getInt2(),this.rcl=this.getInt2(),this.qm=this.getNum(),this.readBoard(-1);for(var h=this.getNum(),a=0;a<h;++a)this.name[a]=this.getNum();var n=this.getInt2(),o=Math.sqrt(n),u=Math.sqrt(n+1e3),d=Math.sqrt(o+1e3);e+=("00000000"+Math.round(Math.abs(Math.cos(d+1e3)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.sin(Math.sqrt(u))*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.cos(d)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.sin(Math.sqrt(o)+1e3)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.cos(Math.sqrt(u+1e3))*s))).slice(-8);for(var l=0,m="0".charCodeAt(0);m<="9".charCodeAt(0);++m)for(var c=0;c<40;++c)e.charCodeAt(c)===m&&(t[l]=Math.floor(c/8),i[l++]=1<<c%8);this.size=this.getInt3(),this.size>=this.MAX_REP&&this.error("Too large video");for(var v=0;v<this.size;++v){this.readEvent(5,r),this.video[v]={},this.video[v].rb=this.applyPerm(0,t,i,r),this.video[v].mb=this.applyPerm(1,t,i,r),this.video[v].lb=this.applyPerm(2,t,i,r),this.video[v].x=this.video[v].y=this.video[v].ths=this.video[v].sec=0;for(var f=0;f<9;++f)this.video[v].x|=this.applyPerm(12+f,t,i,r)<<f,this.video[v].y|=this.applyPerm(3+f,t,i,r)<<f;for(var g=0;g<7;++g)this.video[v].ths|=this.applyPerm(21+g,t,i,r)<<g;this.video[v].ths*=10;for(var p=0;p<10;++p)this.video[v].sec|=this.applyPerm(28+p,t,i,r)<<p}return 1}},{key:"read2007",value:function(){var e="",t=[],i=[],s=1e8,r=[];this.hasDate=1,this.hasInfo=0,this.month=this.getNum(),this.day=this.getNum(),this.year=this.getInt2(),this.hour=this.getNum(),this.minute=this.getNum(),this.second=this.getNum(),this.level=this.getNum(),this.mode=this.getNum(),this.scoreThs=this.getInt3(),this.scoreSec=Math.floor(this.scoreThs/1e3),this.scoreThs%=1e3,this.qm=this.getNum(),this.readBoard(-1);var h=this.getNum();h>=this.MAX_NAME&&(h=this.MAX_NAME-1);for(var a=0;a<h;++a)this.name[a]=this.getNum();var n=this.getInt2(),o=Math.sqrt(n),u=Math.sqrt(n+1e3),d=Math.sqrt(o+1e3),l=Math.sqrt(u+1e3);e+=("00000000"+Math.round(Math.abs(Math.cos(d+1e3)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.sin(Math.sqrt(u))*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.cos(d)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.sin(Math.sqrt(o)+1e3)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.cos(l)*s))).slice(-8),e+=("00000000"+Math.round(Math.abs(Math.sin(l)*s))).slice(-8);for(var m=0,c="0".charCodeAt(0);c<="9".charCodeAt(0);++c)for(var v=0;v<48;++v)e.charCodeAt(v)===c&&(t[m]=Math.floor(v/8),i[m++]=1<<v%8);this.size=this.getInt3(),this.size>=this.MAX_REP&&this.error("Too large video");for(var f=0;f<this.size;++f){this.readEvent(6,r),this.video[f]={},this.video[f].rb=this.applyPerm(0,t,i,r),this.video[f].mb=this.applyPerm(1,t,i,r),this.video[f].lb=this.applyPerm(2,t,i,r),this.video[f].x=this.video[f].y=this.video[f].ths=this.video[f].sec=0;for(var g=0;g<11;++g)this.video[f].x|=this.applyPerm(14+g,t,i,r)<<g,this.video[f].y|=this.applyPerm(3+g,t,i,r)<<g;for(var p=0;p<22;++p)this.video[f].ths|=this.applyPerm(25+p,t,i,r)<<p;this.video[f].sec=Math.floor(this.video[f].ths/1e3),this.video[f].ths%=1e3,this.video[f].x-=32,this.video[f].y-=32}return 1}},{key:"readmvf",value:function(){var e=this.getNum(),t=this.getNum();if(17!==e||77!==t){if(0===e&&0===t)return this.seek(7,"SEEK_SET"),this.version="0.97 Unknown Hack",this.read097();var i,s=[];this.seek(0,"SEEK_SET"),this.readBoard(0),this.qm=this.getNum(),this.getNum();var r=this.getOffset();this.seek(0,"SEEK_END");var h=this.getOffset();this.seek(h-1,"SEEK_SET");var a=this.getChar();this.seek(h-22,"SEEK_SET");var n=this.getChar();if(this.isDigit(a)||this.isDigit(n))if(this.seek(h-13,"SEEK_SET")," "===this.getChar()&&" "===this.getChar()&&" "===this.getChar()){this.version="0.76 beta",i=h-113,this.seek(h-110,"SEEK_SET");for(var o=0;o<100;++o)this.name[o]=this.getNum()}else this.version="0.75 beta (or earlier)",i=h-13;else{this.version="0.96 beta (or earlier)",i=h-125,this.seek(h-122,"SEEK_SET");for(var u=0;u<100;++u)this.name[u]=this.getNum()}this.hasInfo=0,this.hasDate=0,this.mode=1,8===this.w&&8===this.h?this.level=1:16===this.w&&16===this.h?this.level=2:30===this.w&&16===this.h?this.level=3:this.error("Invalid board size"),this.seek(i,"SEEK_SET"),this.readScore(),this.seek(r,"SEEK_SET");while(r<=i){if(this.readEvent(8,s),this.video[this.size]={},this.video[this.size].sec=s[0],this.video[this.size].ths=10*s[1],this.size>0&&(this.video[this.size].sec<this.video[this.size-1].sec||this.video[this.size].sec===this.video[this.size-1].sec&&this.video[this.size].ths<this.video[this.size-1].ths))break;if(this.video[this.size].sec>this.scoreSec||this.video[this.size].sec===this.scoreSec&&this.video[this.size].ths>this.scoreThs)break;this.video[this.size].lb=1&s[2],this.video[this.size].mb=2&s[2],this.video[this.size].rb=4&s[2],this.video[this.size].x=256*s[3]+s[4],this.video[this.size].y=256*s[5]+s[6],this.video[this.size++].weirdnessBit=s[7],r+=8,this.size>=this.MAX_REP&&this.error("Too large video")}return this.video[this.size].lb=this.video[this.size].mb=this.video[this.size].rb=0,this.video[this.size].x=this.video[this.size-1].x,this.video[this.size].y=this.video[this.size-1].y,this.video[this.size].sec=this.video[this.size-1].sec,this.video[this.size].ths=this.video[this.size-1].ths,++this.size,this.size>=this.MAX_REP&&this.error("Too large video"),1}if(this.seek(27,"SEEK_SET"),e=this.getChar(),"5"===e)return this.seek(74,"SEEK_SET"),this.version="0.97 beta",this.read097();if("6"===e||"7"===e){for(this.seek(53,"SEEK_SET"),e=this.getNum(),t=0;t<e;++t)this.version+=this.getChar();return this.seek(71,"SEEK_SET"),this.read2007()}return"8"===e?(this.seek(74,"SEEK_SET"),this.version="0.97 Funny Mode Hack",e=this.read097(),this.mode=3,e):0}},{key:"dumpFirstEvent",value:function(e){var t;e.lb&&(t="lc"),e.rb&&(t="rc"),e.mb&&(t="mc"),t||(t="mv"),this.mEvents.push({time:1e3*e.sec+e.ths,mouse:t,column:Math.floor(e.x/this.squareSize),row:Math.floor(e.y/this.squareSize),x:e.x,y:e.y})}},{key:"dumpEvent",value:function(e,t){var i=0,s=[];e.x===t.x&&e.y===t.y||(s[i++]="mv"),e.lb&&!t.lb&&(s[i++]="lc"),e.rb&&!t.rb&&(s[i++]="rc"),e.mb&&!t.mb&&(s[i++]="mc"),!e.lb&&t.lb&&(s[i++]="lr"),!e.rb&&t.rb&&(s[i++]="rr"),!e.mb&&t.mb&&(s[i++]="mr");for(var r=0;r<i;++r)this.mEvents.push({time:1e3*e.sec+e.ths,mouse:s[r],column:Math.floor(e.x/this.squareSize),row:Math.floor(e.y/this.squareSize),x:e.x,y:e.y})}}]),i}(n["a"])},dfe4:function(e){e.exports=JSON.parse('{"menu":{"game":{"title":"遊戲","localVideo":"選擇本地文件","fileDrag":"檢測文件拖放","marks":"標記問號 (?)","share":{"copy":"複製分享鏈接","open":"打開分享鏈接","copied":"分享鏈接已複製到剪貼板","error":"分享鏈接複製失敗"},"download":"下載錄像文件"},"options":{"title":"選項","language":"繁體中文","toggleLanguages":"切換語言","squareSize":"方塊邊長","videoMap":{"title":"鼠標路徑","move":"鼠標移動","left":"鼠標左鍵","right":"鼠標右鍵","double":"鼠標雙擊","opening":"開空"}},"help":{"title":"幫助","source":"開源代碼","bugs":"問題反饋","version":"版本信息","author":{"title":"作者","blog":"我的博客","domain":"我的地盤"}},"exit":{"title":"退出"}},"game":{"upk":"重開","anonymous":"佚名"},"controlBar":{"play":"播放","pause":"暫停","replay":"重放","displayVideoMap":"顯示鼠標路徑","hideVideoMap":"隱藏鼠標路徑","reset":"重置"},"common":{"loading":"加載中...","copied":"複製成功: {0}","fileSelect":"請選擇一個 avf/mvf/rmv/rawvf 文件"},"error":{"copy":"複製失敗: {0}","videoParse":"錄像解析出錯：","uriRequest":"數據請求出錯：{0}","invalidStatus":"無效的狀態碼：{0}","shareParams":"分享參數解析失敗: {0}","fileNotPresent":"文件不存在","fileNotSelect":"未選擇文件或者文件無法訪問","fileTooMany":"文件數量過多：{0}","fileEmpty":"文件內容為空：{0}","fileUnsupported":"@:common.fileSelect","fileTooLarge":"文件大小超過 5 MB：{0}","fileReadError":"文件讀取出錯：{0}"}}')},eb57:function(e){e.exports=JSON.parse('{"menu":{"game":{"title":"Game","localVideo":"Select local file","fileDrag":"Detect file drag","marks":"Marks (?)","share":{"copy":"Copy share link","open":"Open share link","copied":"Share link has been copied to clipboard","error":"Share link copy failed"},"download":"Download video"},"options":{"title":"Options","language":"English","toggleLanguages":"Languages","squareSize":"Square Size","videoMap":{"title":"Mouse path","move":"Mouse move","left":"Left click","right":"Right click","double":"Double click","opening":"Opening"}},"help":{"title":"Help","source":"Source code","bugs":"Bug feedback","version":"Version name","author":{"title":"Author","blog":"My blog","domain":"My domain"}},"exit":{"title":"Exit"}},"game":{"upk":"UPK","anonymous":"Anonymous"},"controlBar":{"play":"Play","pause":"Pause","replay":"Replay","displayVideoMap":"Display mouse path","hideVideoMap":"Hide mouse path","reset":"Reset"},"common":{"loading":"Loading...","copied":"Copy success: {0}","fileSelect":"Please select a avf/mvf/rmv/rawvf file"},"error":{"copy":"Copy failure: {0}","videoParse":"Video parsing error: ","uriRequest":"Data request error：{0}","invalidStatus":"Invalid status code：{0}","shareParams":"Share parameters parse failure: {0}","fileNotPresent":"File does not exist","fileNotSelect":"No file selected or file not accessible","fileTooMany":"Too many files: {0}","fileEmpty":"File content is empty: {0}","fileUnsupported":"@:common.fileSelect","fileTooLarge":"File size exceeds 5 MB: {0}","fileReadError":"File read out error: {0}"}}')}}]);